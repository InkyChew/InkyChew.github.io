<!doctype html><html lang=zh-tw><head><meta charset=utf-8><meta http-equiv=content-type content="text/html"><meta name=viewport content="width=device-width,initial-scale=1"><title itemprop=name>用 Angular 自己打造訊息彈跳視窗（Modal） | Becomegood</title>
<meta property="og:title" content="用 Angular 自己打造訊息彈跳視窗（Modal） | Becomegood"><meta name=twitter:title content="用 Angular 自己打造訊息彈跳視窗（Modal） | Becomegood"><meta itemprop=name content="用 Angular 自己打造訊息彈跳視窗（Modal） | Becomegood"><meta name=application-name content="用 Angular 自己打造訊息彈跳視窗（Modal） | Becomegood"><meta property="og:site_name" content="Becomegood"><meta name=description content="應用rxjs的BehaviorSubject、Subject和Observable以Angular客製化訊息彈跳視窗，以實現類似JavaScript內建方法alert()和confirm()的功能。"><meta itemprop=description content="應用rxjs的BehaviorSubject、Subject和Observable以Angular客製化訊息彈跳視窗，以實現類似JavaScript內建方法alert()和confirm()的功能。"><meta property="og:description" content="應用rxjs的BehaviorSubject、Subject和Observable以Angular客製化訊息彈跳視窗，以實現類似JavaScript內建方法alert()和confirm()的功能。"><meta name=twitter:description content="應用rxjs的BehaviorSubject、Subject和Observable以Angular客製化訊息彈跳視窗，以實現類似JavaScript內建方法alert()和confirm()的功能。"><meta property="og:locale" content="zh-tw"><meta name=language content="zh-tw"><link rel=alternate hreflang=zh-tw href=https://inkychew.github.io/angular-msg-modal/ title=繁體中文><meta itemprop=image content="https://inkychew.github.io/"><meta property="og:image" content="https://inkychew.github.io/"><meta name=twitter:image content="https://inkychew.github.io/"><meta name=twitter:image:src content="https://inkychew.github.io/"><meta property="og:type" content="article"><meta property="og:article:published_time" content="2024-08-08T09:00:00Z"><meta property="article:published_time" content="2024-08-08T09:00:00Z"><meta property="og:article:author" content="Inky"><meta property="article:author" content="Inky"><meta name=author content="Inky"><script defer type=application/ld+json>{"@context":"http://schema.org","@type":"Article","headline":"用 Angular 自己打造訊息彈跳視窗（Modal）","author":{"@type":"Person","name":"InkyChew"},"datePublished":"2024-08-08","description":"應用rxjs的BehaviorSubject、Subject和Observable以Angular客製化訊息彈跳視窗，以實現類似JavaScript內建方法alert()和confirm()的功能。","wordCount":1531,"mainEntityOfPage":"True","dateModified":"2024-08-08","publisher":{"@type":"Organization","name":"Becomegood"}}</script><meta name=generator content="Hugo 0.120.4"><link rel=canonical href=https://inkychew.github.io/angular-msg-modal/><link href=/style.min.8a54652de86ffeb63c6964bcbc10808e6215629627fa67511c30dcb85c9d2bac.css rel=stylesheet><link href=/code-highlight.min.706d31975fec544a864cb7f0d847a73ea55ca1df91bf495fd12a177138d807cf.css rel=stylesheet><link rel=apple-touch-icon sizes=180x180 href=/icons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/icons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/icons/favicon-16x16.png><link rel=mask-icon href=/icons/safari-pinned-tab.svg><link rel="shortcut icon" href=/favicon.ico><link rel=manifest href=https://inkychew.github.io/site.webmanifest><meta name=msapplication-config content="/browserconfig.xml"><meta name=msapplication-TileColor content="#2d89ef"><meta name=theme-color content="#434648"><link rel=icon type=image/svg+xml href=/icons/favicon.svg><script async src="https://www.googletagmanager.com/gtag/js?id=G-RCC2B8VBYG"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-RCC2B8VBYG",{anonymize_ip:!1})}</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1675103019378172" crossorigin=anonymous></script></head><body data-theme=auto class=notransition><script src=/js/theme.min.8961c317c5b88b953fe27525839672c9343f1058ab044696ca225656c8ba2ab0.js integrity="sha256-iWHDF8W4i5U/4nUlg5ZyyTQ/EFirBEaWyiJWVsi6KrA="></script><div class=navbar role=navigation><nav class=menu aria-label="Main Navigation"><a href=https://inkychew.github.io/ class=logo><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-home"><title>Home</title><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg></a><input type=checkbox id=menu-trigger class=menu-trigger>
<label for=menu-trigger><span class=menu-icon><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" stroke="currentcolor" fill="none" viewBox="0 0 14 14"><title>Menu</title><path stroke-linecap="round" stroke-linejoin="round" d="M10.595 7H3.40726"/><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 3.51488H3.49301"/><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 10.4851H3.49301"/><path stroke-linecap="round" stroke-linejoin="round" d="M.5 12.5V1.5c0-.552285.447715-1 1-1h11C13.0523.5 13.5.947715 13.5 1.5v11C13.5 13.0523 13.0523 13.5 12.5 13.5H1.5C.947715 13.5.5 13.0523.5 12.5z"/></svg></span></label><div class=trigger><ul class=trigger-container><li><a class=menu-link href=/>Home</a></li><li><a class="menu-link active" href=/posts/>Posts</a></li><li><a class=menu-link href=/about/>About</a></li><li class=menu-separator><span>|</span></li></ul><a id=mode href=#><svg xmlns="http://www.w3.org/2000/svg" class="mode-sunny" width="21" height="21" viewBox="0 0 14 14" stroke-width="1"><title>LIGHT</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1=".5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1=".5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/></g></svg><svg xmlns="http://www.w3.org/2000/svg" class="mode-moon" width="21" height="21" viewBox="0 0 14 14" stroke-width="1"><title>DARK</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1=".5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1=".5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/></g></svg></a></div></nav></div><div class="wrapper post"><main class=page-content aria-label=Content><article><header class=header><h1 class=header-title>用 Angular 自己打造訊息彈跳視窗（Modal）</h1><div class=post-meta><time datetime=2024-08-08T09:00:00+00:00 itemprop=datePublished>Aug 8, 2024</time></div></header><details class=toc zgotmplz><summary><b>文章目錄</b></summary><nav id=TableOfContents><ul><li><a href=#建立彈跳視窗模型>建立彈跳視窗模型</a></li><li><a href=#建立彈跳視窗服務>建立彈跳視窗服務</a></li><li><a href=#建立彈跳視窗元件>建立彈跳視窗元件</a><ul><li><a href=#設計彈跳視窗的模板和樣式>設計彈跳視窗的模板和樣式</a></li><li><a href=#接收訊息>接收訊息</a></li><li><a href=#發佈確認結果>發佈確認結果</a></li><li><a href=#關閉訊息>關閉訊息</a></li></ul></li><li><a href=#發佈訊息>發佈訊息</a></li><li><a href=#發佈需經確認的訊息並接收結果>發佈需經確認的訊息並接收結果</a></li><li><a href=#彈跳視窗服務單元測試>彈跳視窗服務單元測試</a></li><li><a href=#彈跳視窗元件單元測試>彈跳視窗元件單元測試</a></li><li><a href=#參考文章>參考文章</a></li></ul></nav></details><div class=page-content><p>我們可能會使用 <a href=https://developer.mozilla.org/zh-TW/docs/Learn/JavaScript/First_steps/What_is_JavaScript target=_blank rel="noreferrer noopener">JavaScript</a> 的內建方法 <code>alert()</code>、<code>confirm()</code> 和 <code>prompt()</code> 輕鬆地顯示彈跳視窗。
本文將應用 <a href=https://rxjs.dev/ target=_blank rel="noreferrer noopener">rxjs</a> 的 <code>BehaviorSubject</code>、<code>Subject</code>、<code>Observable</code> 以 <a href=https://angular.dev/ target=_blank rel="noreferrer noopener">Angular</a> 客製化訊息彈跳視窗，以實現類似 <code>alert()</code> 和 <code>confirm()</code> 的功能。</p><p>參考 <a href=https://www.w3schools.com/ target=_blank rel="noreferrer noopener">W3Schools</a> 的範例來了解這些方法的效果：<a href="https://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_alert" target=_blank rel="noreferrer noopener">alert()</a>、<a href="https://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_confirm" target=_blank rel="noreferrer noopener">confirm()</a>、<a href="https://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_prompt" target=_blank rel="noreferrer noopener">prompt()</a>。</p><h2 id=建立彈跳視窗模型>建立彈跳視窗模型</h2><p>創建 <code>msg-modal.ts</code> 檔案來定義彈跳視窗模型。例如標題、內容和確認操作發佈者。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>export</span> <span class=kr>interface</span> <span class=nx>IMsgModal</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>title?</span>: <span class=kt>MsgType</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>content</span>: <span class=kt>string</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>isConfirm?</span>: <span class=kt>Subject</span><span class=p>&lt;</span><span class=nt>boolean</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>enum</span> <span class=nx>MsgType</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>Info</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nb>Error</span> <span class=o>=</span> <span class=mi>2</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>Success</span> <span class=o>=</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=建立彈跳視窗服務>建立彈跳視窗服務</h2><ol><li>使用 Angular CLI 建立彈跳視窗服務，來管理彈跳視窗的顯示。</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>ng g s msg-modal
</span></span></code></pre></div><ol start=2><li>建立訊息發佈者和訂閱者，並建立方法來發佈訊息。</li></ol><ul><li>建立訊息發佈者 <code>_msgModal</code>。</li><li>建立訊息訂閱者 <code>msgModal$</code> 接收訊息 。</li><li>建立方法 <code>setMsgModal()</code> 發佈普通訊息。</li><li>建立方法 <code>setConfirmModal()</code> 發佈需經確認的訊息。<ul><li>建立確認結果發佈者 <code>isConfirm</code>，傳送到彈跳視窗以發佈確認結果。</li><li>訂閱確認結果發佈者，接收並回傳確認結果。</li></ul></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>export</span> <span class=kr>class</span> <span class=nx>MsgModalService</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>private</span> <span class=nx>_msgModal</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>BehaviorSubject</span><span class=p>&lt;</span><span class=nt>IMsgModal</span><span class=p>&gt;({</span><span class=nx>content</span><span class=o>:</span> <span class=s2>&#34;&#34;</span><span class=p>});</span>　<span class=c1>// 發佈者
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>public</span> <span class=kr>readonly</span> <span class=nx>msgModal$</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>_msgModal</span><span class=p>.</span><span class=nx>asObservable</span><span class=p>();</span> <span class=c1>// 訂閱者
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>  <span class=kr>constructor</span><span class=p>()</span> <span class=p>{</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>setMsgModal</span><span class=p>(</span><span class=nx>info</span>: <span class=kt>IMsgModal</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>_msgModal</span><span class=p>.</span><span class=nx>next</span><span class=p>(</span><span class=nx>info</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>setConfirmModal</span><span class=p>(</span><span class=nx>info</span>: <span class=kt>IMsgModal</span><span class=p>)</span><span class=o>:</span> <span class=nx>Promise</span><span class=p>&lt;</span><span class=nt>boolean</span><span class=p>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>isConfirm</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Subject</span><span class=p>&lt;</span><span class=nt>boolean</span><span class=p>&gt;();</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>_msgModal</span><span class=p>.</span><span class=nx>next</span><span class=p>({...</span><span class=nx>info</span><span class=p>,</span> <span class=nx>isConfirm</span>: <span class=kt>isConfirm</span><span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>firstValueFrom</span><span class=p>(</span><span class=nx>isConfirm</span><span class=p>.</span><span class=nx>asObservable</span><span class=p>());</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=建立彈跳視窗元件>建立彈跳視窗元件</h2><ol><li>使用 Angular CLI 建立彈跳視窗元件。</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>ng g c msg-modal
</span></span></code></pre></div><h3 id=設計彈跳視窗的模板和樣式>設計彈跳視窗的模板和樣式</h3><ul><li>你也可以使用網頁框架，例如 <a href=https://getbootstrap.com/docs/5.3/components/modal/ target=_blank rel="noreferrer noopener">bootstrap Modal</a> 來協助設計彈跳視窗的外觀。</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=c>&lt;!-- msg-modal.component.html --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;msg-modal&#34;</span> <span class=err>*</span><span class=na>ngIf</span><span class=o>=</span><span class=s>&#34;msgList.length &gt; 0&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;modal-content&#34;</span> <span class=err>*</span><span class=na>ngFor</span><span class=o>=</span><span class=s>&#34;let msg of msgList; let i = index;&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>ng-container</span> <span class=err>*</span><span class=na>ngIf</span><span class=o>=</span><span class=s>&#34;msg.title&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>header</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;modal-header&#34;</span> <span class=err>[</span><span class=na>ngClass</span><span class=err>]=&#34;</span><span class=na>color</span><span class=err>(</span><span class=na>msg</span><span class=err>.</span><span class=na>title</span><span class=err>)&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>h5</span><span class=p>&gt;</span>{{ title(msg.title) }}<span class=p>&lt;/</span><span class=nt>h5</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>header</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>ng-container</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>section</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;modal-body&#34;</span> <span class=err>[</span><span class=na>ngClass</span><span class=err>]=&#34;</span><span class=na>color</span><span class=err>(</span><span class=na>msg</span><span class=err>.</span><span class=na>title</span><span class=err>)&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>{{ msg.content }}<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>section</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>footer</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;modal-footer&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>ng-container</span> <span class=err>*</span><span class=na>ngIf</span><span class=o>=</span><span class=s>&#34;msg.isConfirm else close&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>button</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;btn btn-secondary&#34;</span> <span class=err>(</span><span class=na>click</span><span class=err>)=&#34;</span><span class=na>pushConfirm</span><span class=err>(</span><span class=na>msg</span><span class=err>.</span><span class=na>isConfirm</span><span class=err>,</span> <span class=na>true</span><span class=err>,</span> <span class=na>i</span><span class=err>)&#34;</span><span class=p>&gt;</span>OK<span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>button</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;btn btn-primary&#34;</span> <span class=err>(</span><span class=na>click</span><span class=err>)=&#34;</span><span class=na>pushConfirm</span><span class=err>(</span><span class=na>msg</span><span class=err>.</span><span class=na>isConfirm</span><span class=err>,</span> <span class=na>false</span><span class=err>,</span> <span class=na>i</span><span class=err>)&#34;</span><span class=p>&gt;</span>Cancel<span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>ng-container</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>ng-template</span> <span class=err>#</span><span class=na>close</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>button</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;btn btn-primary&#34;</span> <span class=err>(</span><span class=na>click</span><span class=err>)=&#34;</span><span class=na>closeModal</span><span class=err>(</span><span class=na>i</span><span class=err>)&#34;</span><span class=p>&gt;</span>Close<span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>ng-template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>footer</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=c>/* msg-modal.component.css */</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>msg-modal</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>background</span><span class=p>:</span> <span class=nb>rgba</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=mf>0.6</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>position</span><span class=p>:</span> <span class=kc>fixed</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>display</span><span class=p>:</span> <span class=kc>flex</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>justify-content</span><span class=p>:</span> <span class=kc>center</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>align-items</span><span class=p>:</span> <span class=kc>center</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>width</span><span class=p>:</span> <span class=mi>100</span><span class=kt>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>height</span><span class=p>:</span> <span class=mi>100</span><span class=kt>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>z-index</span><span class=p>:</span> <span class=mi>2001</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>msg-modal</span> <span class=p>.</span><span class=nc>modal-content</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>position</span><span class=p>:</span> <span class=kc>fixed</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>display</span><span class=p>:</span> <span class=kc>flex</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>flex-direction</span><span class=p>:</span> <span class=kc>column</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>width</span><span class=p>:</span> <span class=mi>480</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>background</span><span class=p>:</span> <span class=nf>var</span><span class=p>(</span><span class=o>--</span><span class=kc>white</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>border-radius</span><span class=p>:</span> <span class=mf>0.25</span><span class=kt>rem</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>modal-header</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>padding</span><span class=p>:</span> <span class=mi>1</span><span class=kt>em</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>modal-header</span> <span class=nt>h5</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>font-weight</span><span class=p>:</span> <span class=mi>400</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>font-size</span><span class=p>:</span> <span class=mf>1.75</span><span class=kt>em</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>margin</span><span class=p>:</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>modal-body</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>padding</span><span class=p>:</span> <span class=mi>1</span><span class=kt>em</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>border</span><span class=p>:</span> <span class=mi>1</span><span class=kt>px</span> <span class=kc>solid</span> <span class=nf>var</span><span class=p>(</span><span class=o>--</span><span class=n>light</span><span class=o>-</span><span class=kc>gray</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>modal-body</span> <span class=nt>p</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>margin</span><span class=p>:</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>modal-footer</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>padding</span><span class=p>:</span> <span class=mi>1</span><span class=kt>em</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>text-align</span><span class=p>:</span> <span class=kc>right</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>modal-footer</span> <span class=p>.</span><span class=nc>btn</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>min-width</span><span class=p>:</span> <span class=mi>60</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>modal-footer</span> <span class=p>.</span><span class=nc>btn</span><span class=p>:</span><span class=nd>not</span><span class=o>(</span><span class=p>:</span><span class=nd>last-child</span><span class=o>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>margin-right</span><span class=p>:</span> <span class=mi>1</span><span class=kt>em</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>modal-content</span> <span class=p>.</span><span class=nc>modal-body</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>flex-grow</span><span class=p>:</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>display</span><span class=p>:</span> <span class=k>grid</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>justify-content</span><span class=p>:</span> <span class=kc>center</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>align-items</span><span class=p>:</span> <span class=kc>center</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>white-space</span><span class=p>:</span> <span class=kc>pre-line</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>word-break</span><span class=p>:</span> <span class=kc>break-word</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>height</span><span class=p>:</span> <span class=mi>15</span><span class=kt>vh</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>overflow-y</span><span class=p>:</span> <span class=kc>auto</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>@</span><span class=k>media</span> <span class=nt>screen</span> <span class=nt>and</span> <span class=o>(</span><span class=nt>max-width</span><span class=o>:</span> <span class=nt>576px</span><span class=o>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nc>msg-modal</span> <span class=p>.</span><span class=nc>modal-content</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>width</span><span class=p>:</span> <span class=mi>80</span><span class=kt>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>export</span> <span class=kr>class</span> <span class=nx>MsgModalComponent</span> <span class=kr>implements</span> <span class=nx>OnInit</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>msgList</span>: <span class=kt>Array</span><span class=p>&lt;</span><span class=nt>IMsgModal</span><span class=p>&gt;</span> <span class=o>=</span> <span class=p>[];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>constructor</span><span class=p>(</span><span class=kr>private</span> <span class=nx>_msgModalService</span>: <span class=kt>MsgModalService</span><span class=p>)</span> <span class=p>{</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>title</span><span class=p>(</span><span class=kr>type</span><span class=o>:</span> <span class=nx>MsgType</span><span class=p>)</span> <span class=p>{</span> <span class=k>return</span> <span class=nx>MsgType</span><span class=p>[</span><span class=kr>type</span><span class=p>]</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>color</span><span class=p>(</span><span class=nx>title?</span>: <span class=kt>MsgType</span><span class=p>)</span><span class=o>:</span> <span class=kt>string</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>let</span> <span class=nx>color</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>switch</span> <span class=p>(</span><span class=nx>title</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>case</span> <span class=nx>MsgType.Info</span>:
</span></span><span class=line><span class=cl>        <span class=kt>color</span> <span class=o>=</span> <span class=s2>&#34;txt-info&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=k>case</span> <span class=nx>MsgType.Error</span>:
</span></span><span class=line><span class=cl>        <span class=kt>color</span> <span class=o>=</span> <span class=s2>&#34;txt-danger&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=k>case</span> <span class=nx>MsgType.Success</span>:
</span></span><span class=line><span class=cl>        <span class=kt>color</span> <span class=o>=</span> <span class=s2>&#34;txt-success&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=k>default</span><span class=o>:</span>
</span></span><span class=line><span class=cl>        <span class=nx>color</span> <span class=o>=</span> <span class=s2>&#34;txt-info&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>color</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=接收訊息>接收訊息</h3><p>在彈跳視窗元件中，訂閱訊息發佈者，接收並顯示收到的訊息。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>export</span> <span class=kr>class</span> <span class=nx>MsgModalComponent</span> <span class=kr>implements</span> <span class=nx>OnInit</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>msgList</span>: <span class=kt>Array</span><span class=p>&lt;</span><span class=nt>IMsgModal</span><span class=p>&gt;</span> <span class=o>=</span> <span class=p>[];</span>
</span></span><span class=line><span class=cl>  <span class=nx>msgModal$</span>: <span class=kt>Observable</span><span class=p>&lt;</span><span class=nt>IMsgModal</span><span class=p>&gt;</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>_msgModalService</span><span class=p>.</span><span class=nx>msgModal$</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>constructor</span><span class=p>(</span><span class=kr>private</span> <span class=nx>_msgModalService</span>: <span class=kt>MsgModalService</span><span class=p>)</span> <span class=p>{</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>ngOnInit</span><span class=p>()</span><span class=o>:</span> <span class=k>void</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>msgModal$</span><span class=p>.</span><span class=nx>subscribe</span><span class=p>((</span><span class=nx>msg</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=p>(</span><span class=nx>msg</span><span class=p>.</span><span class=nx>content</span><span class=p>)</span> <span class=k>this</span><span class=p>.</span><span class=nx>msgList</span><span class=p>.</span><span class=nx>unshift</span><span class=p>(</span><span class=nx>msg</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=發佈確認結果>發佈確認結果</h3><p>在彈跳視窗元件中，當使用者按下「確認」或「取消」按鈕後，透過方法 <code>pushConfirm()</code> 發佈確認結果給訂閱者。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>export</span> <span class=kr>class</span> <span class=nx>MsgModalComponent</span> <span class=kr>implements</span> <span class=nx>OnInit</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>msgList</span>: <span class=kt>Array</span><span class=p>&lt;</span><span class=nt>IMsgModal</span><span class=p>&gt;</span> <span class=o>=</span> <span class=p>[];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>pushConfirm</span><span class=p>(</span><span class=nx>isConfirm</span>: <span class=kt>Subject</span><span class=p>&lt;</span><span class=nt>boolean</span><span class=p>&gt;,</span> <span class=nx>result</span>: <span class=kt>boolean</span><span class=p>,</span> <span class=nx>i</span>: <span class=kt>number</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>isConfirm</span><span class=p>.</span><span class=nx>next</span><span class=p>(</span><span class=nx>result</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>closeModal</span><span class=p>(</span><span class=nx>i</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=關閉訊息>關閉訊息</h3><p>在彈跳視窗元件中，當使用者按下關閉按鈕，透過方法 <code>closeModal()</code> 將訊息從訊息清單中移除。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>export</span> <span class=kr>class</span> <span class=nx>MsgModalComponent</span> <span class=kr>implements</span> <span class=nx>OnInit</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>msgList</span>: <span class=kt>Array</span><span class=p>&lt;</span><span class=nt>IMsgModal</span><span class=p>&gt;</span> <span class=o>=</span> <span class=p>[];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>closeModal</span><span class=p>(</span><span class=nx>i</span>: <span class=kt>number</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>msgList</span><span class=p>.</span><span class=nx>splice</span><span class=p>(</span><span class=nx>i</span><span class=p>,</span> <span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=發佈訊息>發佈訊息</h2><p>在元件中使用彈跳視窗服務的方法 <code>setMsgModal()</code> 發佈訊息。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>export</span> <span class=kr>class</span> <span class=nx>AppComponent</span> <span class=kr>implements</span> <span class=nx>OnInit</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>constructor</span><span class=p>(</span><span class=kr>private</span> <span class=nx>_msgModalService</span>: <span class=kt>MsgModalService</span><span class=p>)</span> <span class=p>{</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>ngOnInit() {</span>
</span></span><span class=line><span class=cl>    <span class=nx>_msgModalService</span><span class=p>.</span><span class=nx>setMsgModal</span><span class=p>({</span><span class=nx>title</span>: <span class=kt>MsgType.Success</span><span class=p>,</span> <span class=nx>content</span><span class=o>:</span> <span class=s2>&#34;訊息發佈成功!&#34;</span><span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=發佈需經確認的訊息並接收結果>發佈需經確認的訊息並接收結果</h2><p>在元件中使用彈跳視窗服務的方法 <code>setConfirmModal()</code> 發佈需經確認的訊息，並等待確認結果「確認」或「取消」。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>export</span> <span class=kr>class</span> <span class=nx>AppComponent</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>constructor</span><span class=p>(</span><span class=kr>private</span> <span class=nx>_msgModalService</span>: <span class=kt>MsgModalService</span><span class=p>)</span> <span class=p>{</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>async</span> <span class=k>delete</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>isConfirm</span> <span class=o>=</span> <span class=k>await</span> <span class=nx>_msgModalService</span><span class=p>.</span><span class=nx>setConfirmModal</span><span class=p>({</span><span class=nx>content</span><span class=o>:</span> <span class=s2>&#34;Are you sure to delete the data?&#34;</span><span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span><span class=p>(</span><span class=nx>isConfirm</span><span class=p>)</span> <span class=p>{</span> <span class=c1>// 使用者確認
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;the user confirm to delete the data.&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span> <span class=p>{</span> <span class=c1>// 使用者取消
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;the user cancel to delete the data.&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=彈跳視窗服務單元測試>彈跳視窗服務單元測試</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=c1>// msg-modal.service.spec.ts
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>describe</span><span class=p>(</span><span class=s1>&#39;MsgModalService&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>let</span> <span class=nx>service</span>: <span class=kt>MsgModalService</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>beforeEach</span><span class=p>(()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>TestBed</span><span class=p>.</span><span class=nx>configureTestingModule</span><span class=p>({</span>
</span></span><span class=line><span class=cl>      <span class=nx>imports</span><span class=o>:</span> <span class=p>[</span><span class=nx>HttpClientTestingModule</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=nx>service</span> <span class=o>=</span> <span class=nx>TestBed</span><span class=p>.</span><span class=nx>inject</span><span class=p>(</span><span class=nx>MsgModalService</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>it</span><span class=p>(</span><span class=s1>&#39;should be created&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>expect</span><span class=p>(</span><span class=nx>service</span><span class=p>).</span><span class=nx>toBeTruthy</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>it</span><span class=p>(</span><span class=s1>&#39;should update msgModal behavior subject with new info&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>newInfo</span>: <span class=kt>IMsgModal</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>content</span><span class=o>:</span> <span class=s1>&#39;Test message&#39;</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=nx>service</span><span class=p>.</span><span class=nx>setMsgModal</span><span class=p>(</span><span class=nx>newInfo</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>service</span><span class=p>.</span><span class=nx>msgModal$</span><span class=p>.</span><span class=nx>subscribe</span><span class=p>((</span><span class=nx>info</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>expect</span><span class=p>(</span><span class=nx>info</span><span class=p>).</span><span class=nx>toEqual</span><span class=p>(</span><span class=nx>newInfo</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>it</span><span class=p>(</span><span class=s1>&#39;should return a promise true&#39;</span><span class=p>,</span> <span class=kr>async</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>confirmInfo</span>: <span class=kt>IMsgModal</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>content</span><span class=o>:</span> <span class=s1>&#39;Confirm message&#39;</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>promise</span> <span class=o>=</span> <span class=nx>service</span><span class=p>.</span><span class=nx>setConfirmModal</span><span class=p>(</span><span class=nx>confirmInfo</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>service</span><span class=p>.</span><span class=nx>msgModal$</span><span class=p>.</span><span class=nx>subscribe</span><span class=p>((</span><span class=nx>info</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=p>(</span><span class=nx>info</span><span class=p>.</span><span class=nx>isConfirm</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>info</span><span class=p>.</span><span class=nx>isConfirm</span><span class=p>.</span><span class=nx>next</span><span class=p>(</span><span class=kc>true</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>result</span> <span class=o>=</span> <span class=k>await</span> <span class=nx>promise</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>expect</span><span class=p>(</span><span class=nx>result</span><span class=p>).</span><span class=nx>toBe</span><span class=p>(</span><span class=kc>true</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>it</span><span class=p>(</span><span class=s1>&#39;should return a promise false&#39;</span><span class=p>,</span> <span class=kr>async</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>confirmInfo</span>: <span class=kt>IMsgModal</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>content</span><span class=o>:</span> <span class=s1>&#39;Confirm message&#39;</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>promise</span> <span class=o>=</span> <span class=nx>service</span><span class=p>.</span><span class=nx>setConfirmModal</span><span class=p>(</span><span class=nx>confirmInfo</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>service</span><span class=p>.</span><span class=nx>msgModal$</span><span class=p>.</span><span class=nx>subscribe</span><span class=p>((</span><span class=nx>info</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=p>(</span><span class=nx>info</span><span class=p>.</span><span class=nx>isConfirm</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>info</span><span class=p>.</span><span class=nx>isConfirm</span><span class=p>.</span><span class=nx>next</span><span class=p>(</span><span class=kc>false</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>result</span> <span class=o>=</span> <span class=k>await</span> <span class=nx>promise</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>expect</span><span class=p>(</span><span class=nx>result</span><span class=p>).</span><span class=nx>toBe</span><span class=p>(</span><span class=kc>false</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></div><h2 id=彈跳視窗元件單元測試>彈跳視窗元件單元測試</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=c1>// msg-modal.component.spec.ts
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>describe</span><span class=p>(</span><span class=s1>&#39;MsgModalComponent&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>let</span> <span class=nx>component</span>: <span class=kt>MsgModalComponent</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kd>let</span> <span class=nx>fixture</span>: <span class=kt>ComponentFixture</span><span class=p>&lt;</span><span class=nt>MsgModalComponent</span><span class=p>&gt;;</span>
</span></span><span class=line><span class=cl>  <span class=kd>let</span> <span class=nx>msgModalService</span>: <span class=kt>jasmine.SpyObj</span><span class=p>&lt;</span><span class=nt>MsgModalService</span><span class=p>&gt;;</span>
</span></span><span class=line><span class=cl>  <span class=kd>let</span> <span class=nx>msgModal$</span>: <span class=kt>BehaviorSubject</span><span class=p>&lt;</span><span class=nt>IMsgModal</span><span class=p>&gt;;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>beforeEach</span><span class=p>(</span><span class=kr>async</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>msgModalSpy</span> <span class=o>=</span> <span class=nx>jasmine</span><span class=p>.</span><span class=nx>createSpyObj</span><span class=p>(</span><span class=s1>&#39;MsgModalService&#39;</span><span class=p>,</span> <span class=p>[</span><span class=s1>&#39;setMsgModal&#39;</span><span class=p>,</span> <span class=s1>&#39;setConfirmModal&#39;</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>    <span class=nx>msgModal$</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>BehaviorSubject</span><span class=p>&lt;</span><span class=nt>IMsgModal</span><span class=p>&gt;({</span> <span class=nx>content</span><span class=o>:</span> <span class=s1>&#39;&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=nx>msgModalSpy</span><span class=p>.</span><span class=nx>msgModal$</span> <span class=o>=</span> <span class=nx>msgModal$</span><span class=p>.</span><span class=nx>asObservable</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>await</span> <span class=nx>TestBed</span><span class=p>.</span><span class=nx>configureTestingModule</span><span class=p>({</span>
</span></span><span class=line><span class=cl>      <span class=nx>declarations</span><span class=o>:</span> <span class=p>[</span> <span class=nx>MsgModalComponent</span> <span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=nx>imports</span><span class=o>:</span> <span class=p>[</span> <span class=nx>HttpClientTestingModule</span> <span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=nx>providers</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span> <span class=nx>provide</span>: <span class=kt>MsgModalService</span><span class=p>,</span> <span class=nx>useValue</span>: <span class=kt>msgModalSpy</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>compileComponents</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>fixture</span> <span class=o>=</span> <span class=nx>TestBed</span><span class=p>.</span><span class=nx>createComponent</span><span class=p>(</span><span class=nx>MsgModalComponent</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>component</span> <span class=o>=</span> <span class=nx>fixture</span><span class=p>.</span><span class=nx>componentInstance</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>msgModalService</span> <span class=o>=</span> <span class=nx>TestBed</span><span class=p>.</span><span class=nx>inject</span><span class=p>(</span><span class=nx>MsgModalService</span><span class=p>)</span> <span class=kr>as</span> <span class=nx>jasmine</span><span class=p>.</span><span class=nx>SpyObj</span><span class=p>&lt;</span><span class=nt>MsgModalService</span><span class=p>&gt;;</span>
</span></span><span class=line><span class=cl>    <span class=nx>fixture</span><span class=p>.</span><span class=nx>detectChanges</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>it</span><span class=p>(</span><span class=s1>&#39;should create&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>expect</span><span class=p>(</span><span class=nx>component</span><span class=p>).</span><span class=nx>toBeTruthy</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>it</span><span class=p>(</span><span class=s1>&#39;should handle message updates correctly&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>initialMsg</span>: <span class=kt>IMsgModal</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>content</span><span class=o>:</span> <span class=s1>&#39;Initial message&#39;</span><span class=p>,</span> <span class=nx>title</span>: <span class=kt>MsgType.Info</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>newMsg</span>: <span class=kt>IMsgModal</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>content</span><span class=o>:</span> <span class=s1>&#39;New message&#39;</span><span class=p>,</span> <span class=nx>title</span>: <span class=kt>MsgType.Error</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>component</span><span class=p>.</span><span class=nx>ngOnInit</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=nx>msgModal$</span><span class=p>.</span><span class=nx>next</span><span class=p>(</span><span class=nx>initialMsg</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>msgModal$</span><span class=p>.</span><span class=nx>next</span><span class=p>(</span><span class=nx>newMsg</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>expect</span><span class=p>(</span><span class=nx>component</span><span class=p>.</span><span class=nx>msgList</span><span class=p>.</span><span class=nx>length</span><span class=p>).</span><span class=nx>toBe</span><span class=p>(</span><span class=mi>2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>expect</span><span class=p>(</span><span class=nx>component</span><span class=p>.</span><span class=nx>msgList</span><span class=p>[</span><span class=mi>0</span><span class=p>]).</span><span class=nx>toEqual</span><span class=p>(</span><span class=nx>newMsg</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>expect</span><span class=p>(</span><span class=nx>component</span><span class=p>.</span><span class=nx>msgList</span><span class=p>[</span><span class=mi>1</span><span class=p>]).</span><span class=nx>toEqual</span><span class=p>(</span><span class=nx>initialMsg</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>it</span><span class=p>(</span><span class=s1>&#39;should show the button when msg isConfirm&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>testMsg</span>: <span class=kt>IMsgModal</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>content</span><span class=o>:</span> <span class=s1>&#39;Test message&#39;</span><span class=p>,</span> <span class=nx>title</span>: <span class=kt>MsgType.Info</span><span class=p>,</span> <span class=nx>isConfirm</span>: <span class=kt>new</span> <span class=nx>Subject</span><span class=p>&lt;</span><span class=nt>boolean</span><span class=p>&gt;()</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>component</span><span class=p>.</span><span class=nx>ngOnInit</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=nx>msgModal$</span><span class=p>.</span><span class=nx>next</span><span class=p>(</span><span class=nx>testMsg</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>fixture</span><span class=p>.</span><span class=nx>detectChanges</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>okBtn</span> <span class=o>=</span> <span class=nx>fixture</span><span class=p>.</span><span class=nx>debugElement</span><span class=p>.</span><span class=nx>query</span><span class=p>(</span><span class=nx>By</span><span class=p>.</span><span class=nx>css</span><span class=p>(</span><span class=s1>&#39;.btn-secondary&#39;</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>cancelBtn</span> <span class=o>=</span> <span class=nx>fixture</span><span class=p>.</span><span class=nx>debugElement</span><span class=p>.</span><span class=nx>query</span><span class=p>(</span><span class=nx>By</span><span class=p>.</span><span class=nx>css</span><span class=p>(</span><span class=s1>&#39;.btn-primary&#39;</span><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>expect</span><span class=p>(</span><span class=nx>okBtn</span><span class=p>.</span><span class=nx>nativeElement</span><span class=p>.</span><span class=nx>innerText</span><span class=p>).</span><span class=nx>toBe</span><span class=p>(</span><span class=s2>&#34;OK&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>expect</span><span class=p>(</span><span class=nx>cancelBtn</span><span class=p>.</span><span class=nx>nativeElement</span><span class=p>.</span><span class=nx>innerText</span><span class=p>).</span><span class=nx>toBe</span><span class=p>(</span><span class=s2>&#34;Cancel&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>it</span><span class=p>(</span><span class=s1>&#39;should return correct title&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>expect</span><span class=p>(</span><span class=nx>component</span><span class=p>.</span><span class=nx>title</span><span class=p>(</span><span class=nx>MsgType</span><span class=p>.</span><span class=nx>Info</span><span class=p>)).</span><span class=nx>toBe</span><span class=p>(</span><span class=s2>&#34;Info&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>expect</span><span class=p>(</span><span class=nx>component</span><span class=p>.</span><span class=nx>title</span><span class=p>(</span><span class=nx>MsgType</span><span class=p>.</span><span class=nb>Error</span><span class=p>)).</span><span class=nx>toBe</span><span class=p>(</span><span class=s2>&#34;Error&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>expect</span><span class=p>(</span><span class=nx>component</span><span class=p>.</span><span class=nx>title</span><span class=p>(</span><span class=nx>MsgType</span><span class=p>.</span><span class=nx>Success</span><span class=p>)).</span><span class=nx>toBe</span><span class=p>(</span><span class=s2>&#34;Success&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>it</span><span class=p>(</span><span class=s1>&#39;should return correct color class&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>expect</span><span class=p>(</span><span class=nx>component</span><span class=p>.</span><span class=nx>color</span><span class=p>(</span><span class=nx>MsgType</span><span class=p>.</span><span class=nx>Info</span><span class=p>)).</span><span class=nx>toBe</span><span class=p>(</span><span class=s2>&#34;txt-info&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>expect</span><span class=p>(</span><span class=nx>component</span><span class=p>.</span><span class=nx>color</span><span class=p>(</span><span class=nx>MsgType</span><span class=p>.</span><span class=nb>Error</span><span class=p>)).</span><span class=nx>toBe</span><span class=p>(</span><span class=s2>&#34;txt-danger&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>expect</span><span class=p>(</span><span class=nx>component</span><span class=p>.</span><span class=nx>color</span><span class=p>(</span><span class=nx>MsgType</span><span class=p>.</span><span class=nx>Success</span><span class=p>)).</span><span class=nx>toBe</span><span class=p>(</span><span class=s2>&#34;txt-success&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>expect</span><span class=p>(</span><span class=nx>component</span><span class=p>.</span><span class=nx>color</span><span class=p>(</span><span class=kc>undefined</span><span class=p>)).</span><span class=nx>toBe</span><span class=p>(</span><span class=s2>&#34;txt-info&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>it</span><span class=p>(</span><span class=s1>&#39;should push confirm result and close modal&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>isConfirm</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Subject</span><span class=p>&lt;</span><span class=nt>boolean</span><span class=p>&gt;();</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>testResult</span> <span class=o>=</span> <span class=kc>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>testIndex</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>spyIsConfirmNext</span> <span class=o>=</span> <span class=nx>spyOn</span><span class=p>(</span><span class=nx>isConfirm</span><span class=p>,</span> <span class=s1>&#39;next&#39;</span><span class=p>).</span><span class=nx>and</span><span class=p>.</span><span class=nx>callThrough</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>spyCloseModal</span> <span class=o>=</span> <span class=nx>spyOn</span><span class=p>(</span><span class=nx>component</span><span class=p>,</span> <span class=s1>&#39;closeModal&#39;</span><span class=p>).</span><span class=nx>and</span><span class=p>.</span><span class=nx>callThrough</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>    <span class=nx>component</span><span class=p>.</span><span class=nx>pushConfirm</span><span class=p>(</span><span class=nx>isConfirm</span><span class=p>,</span> <span class=nx>testResult</span><span class=p>,</span> <span class=nx>testIndex</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>expect</span><span class=p>(</span><span class=nx>spyIsConfirmNext</span><span class=p>).</span><span class=nx>toHaveBeenCalledWith</span><span class=p>(</span><span class=nx>testResult</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>expect</span><span class=p>(</span><span class=nx>spyCloseModal</span><span class=p>).</span><span class=nx>toHaveBeenCalledWith</span><span class=p>(</span><span class=nx>testIndex</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>it</span><span class=p>(</span><span class=s1>&#39;should item in msgList be removed when closeModal&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>component</span><span class=p>.</span><span class=nx>msgList</span> <span class=o>=</span> <span class=p>[{</span><span class=nx>content</span><span class=o>:</span> <span class=s2>&#34;A&#34;</span><span class=p>},</span> <span class=p>{</span><span class=nx>content</span><span class=o>:</span> <span class=s2>&#34;B&#34;</span><span class=p>},</span> <span class=p>{</span><span class=nx>content</span><span class=o>:</span> <span class=s2>&#34;C&#34;</span><span class=p>}];</span>
</span></span><span class=line><span class=cl>    <span class=nx>component</span><span class=p>.</span><span class=nx>closeModal</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>expect</span><span class=p>(</span><span class=nx>component</span><span class=p>.</span><span class=nx>msgList</span><span class=p>.</span><span class=nx>length</span><span class=p>).</span><span class=nx>toBe</span><span class=p>(</span><span class=mi>2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>expect</span><span class=p>(</span><span class=nx>component</span><span class=p>.</span><span class=nx>msgList</span><span class=p>[</span><span class=mi>0</span><span class=p>].</span><span class=nx>content</span><span class=p>).</span><span class=nx>toBe</span><span class=p>(</span><span class=s2>&#34;A&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>expect</span><span class=p>(</span><span class=nx>component</span><span class=p>.</span><span class=nx>msgList</span><span class=p>[</span><span class=mi>1</span><span class=p>].</span><span class=nx>content</span><span class=p>).</span><span class=nx>toBe</span><span class=p>(</span><span class=s2>&#34;C&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></div><h2 id=參考文章>參考文章</h2><ul><li><a href=https://www.w3schools.com/jsref/met_win_alert.asp target=_blank rel="noreferrer noopener">alert()</a></li><li><a href=https://www.w3schools.com/jsref/met_win_confirm.asp target=_blank rel="noreferrer noopener">confirm()</a></li><li><a href=https://www.w3schools.com/jsref/met_win_prompt.asp target=_blank rel="noreferrer noopener">prompt()</a></li><li><a href=https://rxjs.dev/guide/subject#behaviorsubject target=_blank rel="noreferrer noopener">BehaviorSubject</a></li><li><a href=https://rxjs.dev/guide/subject target=_blank rel="noreferrer noopener">Subject</a></li><li><a href=https://rxjs.dev/guide/observable target=_blank rel="noreferrer noopener">Observable</a></li></ul><div class=content-box><b>相關文章</b><ul><li><a href=/angular-alert>How to customize an Alert Message Box in Angular?</a></li><li><a href=/angular-loading-spinner>Angular - Add loading spinner</a></li></ul></div><div class=page-tag><ul class=tag-list><li class=tag-item><a href=/categories/web-development/ class=tag-item-link>Web Development</a></li><li class=tag-item><a href=/tags/angular/ class=tag-item-link>Angular</a></li></ul></div></div></article></main></div><footer class=footer><span class=footer_item></span>&nbsp;<div class=footer_social-icons><a href=https://github.com/InkyChew target=_blank rel="noopener noreferrer me" title=Github><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a><a href=/index.xml target=_blank rel="noopener noreferrer me" title=Rss><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></div><small class=footer_copyright>© 2024 InkyChew.</small></footer><a href=# title="Go to top" id=totop><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentcolor" stroke="currentcolor" viewBox="0 96 960 960"><path d="M283 704.739 234.261 656 480 410.261 725.739 656 677 704.739l-197-197-197 197z"/></svg></a><script src=https://inkychew.github.io/js/main.min.35f435a5d8eac613c52daa28d8af544a4512337d3e95236e4a4978417b8dcb2f.js integrity="sha256-NfQ1pdjqxhPFLaoo2K9USkUSM30+lSNuSkl4QXuNyy8="></script></body></html>