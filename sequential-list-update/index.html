<!doctype html><html lang=zh-tw><head><meta charset=utf-8><meta http-equiv=content-type content="text/html"><meta name=viewport content="width=device-width,initial-scale=1"><title itemprop=name>Efficient Sequential List Update with SignalR in Angular and .NET | Becomegood</title>
<meta property="og:title" content="Efficient Sequential List Update with SignalR in Angular and .NET | Becomegood"><meta name=twitter:title content="Efficient Sequential List Update with SignalR in Angular and .NET | Becomegood"><meta itemprop=name content="Efficient Sequential List Update with SignalR in Angular and .NET | Becomegood"><meta name=application-name content="Efficient Sequential List Update with SignalR in Angular and .NET | Becomegood"><meta property="og:site_name" content="Becomegood"><meta name=description content="Learn how to efficiently manage and broadcast updates for sequential list reordering using SignalR for real-time notifications, Angular for frontend integration, and .NET for backend broadcasting. Improve user experience and task management."><meta itemprop=description content="Learn how to efficiently manage and broadcast updates for sequential list reordering using SignalR for real-time notifications, Angular for frontend integration, and .NET for backend broadcasting. Improve user experience and task management."><meta property="og:description" content="Learn how to efficiently manage and broadcast updates for sequential list reordering using SignalR for real-time notifications, Angular for frontend integration, and .NET for backend broadcasting. Improve user experience and task management."><meta name=twitter:description content="Learn how to efficiently manage and broadcast updates for sequential list reordering using SignalR for real-time notifications, Angular for frontend integration, and .NET for backend broadcasting. Improve user experience and task management."><meta property="og:locale" content="zh-tw"><meta name=language content="zh-tw"><link rel=alternate hreflang=zh-tw href=https://inkychew.github.io/sequential-list-update/ title=繁體中文><meta itemprop=image content="https://inkychew.github.io/"><meta property="og:image" content="https://inkychew.github.io/"><meta name=twitter:image content="https://inkychew.github.io/"><meta name=twitter:image:src content="https://inkychew.github.io/"><meta property="og:type" content="article"><meta property="og:article:published_time" content="2024-11-24T09:00:00Z"><meta property="article:published_time" content="2024-11-24T09:00:00Z"><meta property="og:article:author" content="Inky"><meta property="article:author" content="Inky"><meta name=author content="Inky"><script defer type=application/ld+json>{"@context":"http://schema.org","@type":"Article","headline":"Efficient Sequential List Update with SignalR in Angular and .NET","author":{"@type":"Person","name":"InkyChew"},"datePublished":"2024-11-24","description":"Learn how to efficiently manage and broadcast updates for sequential list reordering using SignalR for real-time notifications, Angular for frontend integration, and .NET for backend broadcasting. Improve user experience and task management.","wordCount":757,"mainEntityOfPage":"True","dateModified":"2024-11-24","publisher":{"@type":"Organization","name":"Becomegood"}}</script><meta name=generator content="Hugo 0.120.4"><link rel=canonical href=https://inkychew.github.io/sequential-list-update/><link href=/style.min.8a54652de86ffeb63c6964bcbc10808e6215629627fa67511c30dcb85c9d2bac.css rel=stylesheet><link href=/code-highlight.min.706d31975fec544a864cb7f0d847a73ea55ca1df91bf495fd12a177138d807cf.css rel=stylesheet><link rel=apple-touch-icon sizes=180x180 href=/icons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/icons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/icons/favicon-16x16.png><link rel=mask-icon href=/icons/safari-pinned-tab.svg><link rel="shortcut icon" href=/favicon.ico><link rel=manifest href=https://inkychew.github.io/site.webmanifest><meta name=msapplication-config content="/browserconfig.xml"><meta name=msapplication-TileColor content="#2d89ef"><meta name=theme-color content="#434648"><link rel=icon type=image/svg+xml href=/icons/favicon.svg><script async src="https://www.googletagmanager.com/gtag/js?id=G-RCC2B8VBYG"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-RCC2B8VBYG",{anonymize_ip:!1})}</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1675103019378172" crossorigin=anonymous></script></head><body data-theme=auto class=notransition><script src=/js/theme.min.8961c317c5b88b953fe27525839672c9343f1058ab044696ca225656c8ba2ab0.js integrity="sha256-iWHDF8W4i5U/4nUlg5ZyyTQ/EFirBEaWyiJWVsi6KrA="></script><div class=navbar role=navigation><nav class=menu aria-label="Main Navigation"><a href=https://inkychew.github.io/ class=logo><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-home"><title>Home</title><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg></a><input type=checkbox id=menu-trigger class=menu-trigger>
<label for=menu-trigger><span class=menu-icon><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" stroke="currentcolor" fill="none" viewBox="0 0 14 14"><title>Menu</title><path stroke-linecap="round" stroke-linejoin="round" d="M10.595 7H3.40726"/><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 3.51488H3.49301"/><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 10.4851H3.49301"/><path stroke-linecap="round" stroke-linejoin="round" d="M.5 12.5V1.5c0-.552285.447715-1 1-1h11C13.0523.5 13.5.947715 13.5 1.5v11C13.5 13.0523 13.0523 13.5 12.5 13.5H1.5C.947715 13.5.5 13.0523.5 12.5z"/></svg></span></label><div class=trigger><ul class=trigger-container><li><a class=menu-link href=/>Home</a></li><li><a class="menu-link active" href=/posts/>Posts</a></li><li><a class=menu-link href=/about/>About</a></li><li class=menu-separator><span>|</span></li></ul><a id=mode href=#><svg xmlns="http://www.w3.org/2000/svg" class="mode-sunny" width="21" height="21" viewBox="0 0 14 14" stroke-width="1"><title>LIGHT</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1=".5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1=".5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/></g></svg><svg xmlns="http://www.w3.org/2000/svg" class="mode-moon" width="21" height="21" viewBox="0 0 14 14" stroke-width="1"><title>DARK</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1=".5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1=".5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/></g></svg></a></div></nav></div><div class="wrapper post"><main class=page-content aria-label=Content><article><header class=header><h1 class=header-title>Efficient Sequential List Update with SignalR in Angular and .NET</h1><div class=post-meta><time datetime=2024-11-24T09:00:00+00:00 itemprop=datePublished>Nov 24, 2024</time></div></header><details class=toc zgotmplz><summary><b>文章目錄</b></summary><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a></li><li><a href=#create-server-side-broadcasting-mechanism-in-net>Create Server-Side Broadcasting Mechanism in .NET</a><ul><li><a href=#1-create-a-broadcast-hub>1. Create a Broadcast Hub</a></li><li><a href=#2-register-signalr>2. Register SignalR</a></li></ul></li><li><a href=#client-side-notification-mechanism-in-angular>Client-Side Notification Mechanism in Angular</a><ul><li><a href=#1-install-signalr-and-create-collaboration-service>1. Install SignalR and Create Collaboration Service</a></li><li><a href=#2-connect-and-listen-for-updates>2. Connect and Listen for Updates</a></li></ul></li><li><a href=#efficient-update-handling-with-debouncing>Efficient Update Handling with Debouncing</a><ul><li><a href=#1-implement-debouncing-for-order-updates>1. Implement Debouncing for Order Updates</a></li><li><a href=#2-service-to-handle-update-requests>2. Service to Handle Update Requests</a></li></ul></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></details><div class=page-content><h2 id=introduction>Introduction</h2><p>When working with task management or planning applications, ensuring that users can reorder lists efficiently and in real-time is critical. A user may need to adjust the sequence of tasks, and such updates must be immediately reflected across all active users.</p><p>In this post, we’ll walk through how to manage and broadcast sequential list updates in real-time using SignalR for broadcasting updates and Angular for frontend notification handling. The goal is to provide users with a seamless experience as they reorder a list.</p><h2 id=create-server-side-broadcasting-mechanism-in-net>Create Server-Side Broadcasting Mechanism in .NET</h2><p>The backend needs to handle broadcasting updates to all clients whenever the order of items in a list is changed. Here&rsquo;s how you can set up SignalR in the backend with .NET:</p><h3 id=1-create-a-broadcast-hub>1. Create a Broadcast Hub</h3><p>First, create a SignalR hub on the server side that extends <code>Hub</code> class and notifies all connected clients.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cs data-lang=cs><span class=line><span class=cl><span class=k>using</span> <span class=nn>Microsoft.AspNetCore.SignalR</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>CollaborationHub</span> <span class=p>:</span> <span class=n>Hub</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>async</span> <span class=n>Task</span> <span class=n>PlanOrderUpdated</span><span class=p>(</span><span class=kt>string</span> <span class=n>username</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Log</span><span class=p>.</span><span class=n>Information</span><span class=p>(</span><span class=s>$&#34;{username} updated the plan order&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>await</span> <span class=n>Clients</span><span class=p>.</span><span class=n>All</span><span class=p>.</span><span class=n>SendAsync</span><span class=p>(</span><span class=s>&#34;PlanOrderUpdated&#34;</span><span class=p>,</span> <span class=n>username</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>The <code>PlanOrderUpdated</code> method sends a notification with the username of the person who made the change to all connected clients.</p><h3 id=2-register-signalr>2. Register SignalR</h3><p>Once the hub is created, configure it in <code>Program.cs</code>. Add SignalR to your services and map the hub route, naming the route (e.g., <code>/CollaborationHub</code>), so that the frontend can connect to it.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cs data-lang=cs><span class=line><span class=cl><span class=c1>// TODO1: Add SignalR</span>
</span></span><span class=line><span class=cl><span class=n>builder</span><span class=p>.</span><span class=n>Services</span><span class=p>.</span><span class=n>AddSignalR</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>app</span><span class=p>.</span><span class=n>MapControllers</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// TODO2: Map and name the hub route</span>
</span></span><span class=line><span class=cl><span class=n>app</span><span class=p>.</span><span class=n>MapHub</span><span class=p>&lt;</span><span class=n>CollaborationHub</span><span class=p>&gt;(</span><span class=s>&#34;/CollaborationHub&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>app</span><span class=p>.</span><span class=n>Run</span><span class=p>();</span>
</span></span></code></pre></div><h2 id=client-side-notification-mechanism-in-angular>Client-Side Notification Mechanism in Angular</h2><p>On the Angular frontend, we need to connect to the server hub and listen for updates from the SignalR hub to reflect changes in the UI, ensuring that the updated order is displayed in real-time for all users.</p><h3 id=1-install-signalr-and-create-collaboration-service>1. Install SignalR and Create Collaboration Service</h3><p>First, install the SignalR client package for Angular and create a service to manage the real-time connection.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>npm i @microsoft/signalr
</span></span><span class=line><span class=cl>ng g s collaboration
</span></span></code></pre></div><p>In the service, set up a connection to the SignalR hub and create methods:</p><ul><li>start(): Starts the hub connection.</li><li>stop(): Stops the hub connection.</li><li>on(): Listens for the event. The event name (e.g., <code>PlanOrderUpdated</code>) should match the one defined on the server.</li><li>invoke(): Calls the method to trigger an event. The method name (e.g., <code>PlanOrderUpdated</code>) should match the one defined on the server.</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>import</span> <span class=o>*</span> <span class=kr>as</span> <span class=nx>signalR</span> <span class=kr>from</span> <span class=s1>&#39;@microsoft/signalr&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>class</span> <span class=nx>CollaborationService</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>private</span> <span class=nx>hubConnection</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>signalR</span><span class=p>.</span><span class=nx>HubConnectionBuilder</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>withUrl</span><span class=p>(</span><span class=s1>&#39;http://localhost:5000/CollaborationHub&#39;</span><span class=p>,</span> <span class=p>{</span> <span class=nx>withCredentials</span>: <span class=kt>false</span> <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>build</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>startConnection() {</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>hubConnection</span><span class=p>.</span><span class=nx>start</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>stopConnection() {</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>hubConnection</span><span class=p>.</span><span class=nx>stop</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>orderIndexUpdatedListener</span><span class=p>(</span><span class=nx>handler</span><span class=o>:</span> <span class=p>(</span><span class=nx>username</span>: <span class=kt>string</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=k>void</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>hubConnection</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;PlanOrderUpdated&#39;</span><span class=p>,</span> <span class=p>(</span><span class=nx>username</span>: <span class=kt>string</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=nx>handler</span><span class=p>(</span><span class=nx>username</span><span class=p>));</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>orderIndexUpdated</span><span class=p>(</span><span class=nx>username</span>: <span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>hubConnection</span><span class=p>.</span><span class=nx>invoke</span><span class=p>(</span><span class=s1>&#39;PlanOrderUpdated&#39;</span><span class=p>,</span> <span class=nx>username</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=2-connect-and-listen-for-updates>2. Connect and Listen for Updates</h3><p>In your Angular component, start the hub connection when the component loads in <code>ngOnInit()</code> and register an event listener to receive updates on changes made by others.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>export</span> <span class=kr>class</span> <span class=nx>PlanComponent</span> <span class=kr>implements</span> <span class=nx>OnInit</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>constructor</span><span class=p>(</span><span class=kr>private</span> <span class=nx>_coService</span>: <span class=kt>CollaborationService</span><span class=p>)</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>ngOnInit</span><span class=p>()</span><span class=o>:</span> <span class=k>void</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>_coService</span><span class=p>.</span><span class=nx>startConnection</span><span class=p>().</span><span class=nx>then</span><span class=p>(()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>_coService</span><span class=p>.</span><span class=nx>orderIndexUpdatedListener</span><span class=p>((</span><span class=nx>username</span>: <span class=kt>string</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>this</span><span class=p>.</span><span class=nx>getExecList</span><span class=p>();</span>
</span></span><span class=line><span class=cl>                <span class=nx>notify</span><span class=p>({</span><span class=nx>message</span><span class=o>:</span> <span class=sb>`</span><span class=si>${</span><span class=nx>username</span><span class=si>}</span><span class=sb> just updated the plan order.`</span><span class=p>,</span> <span class=kr>type</span><span class=o>:</span> <span class=s2>&#34;success&#34;</span><span class=p>,</span> <span class=nx>displayTime</span>: <span class=kt>3000</span><span class=p>},</span> <span class=p>{</span><span class=nx>position</span><span class=o>:</span> <span class=s2>&#34;bottom center&#34;</span><span class=p>});</span>
</span></span><span class=line><span class=cl>            <span class=p>});</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>ngOnDestroy() {</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>_coService</span><span class=p>.</span><span class=nx>stopConnection</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>When the user leaves the component, <code>ngOnDestroy()</code> is triggered to stop the hub connection.</p><h2 id=efficient-update-handling-with-debouncing>Efficient Update Handling with Debouncing</h2><p>To ensure that multiple updates aren&rsquo;t processed in rapid succession (which can be overwhelming for the system), we can debounce updates to trigger only after a short delay. This technique improves performance and reduces unnecessary requests to the server.</p><h3 id=1-implement-debouncing-for-order-updates>1. Implement Debouncing for Order Updates</h3><p>Using RxJS <code>debounceTime()</code>, we can delay the sending of updates to the backend until the user has finished making changes. This ensures that updates are batched together, optimizing both the user experience and server load.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>export</span> <span class=kr>class</span> <span class=nx>PlanComponent</span> <span class=kr>implements</span> <span class=nx>OnInit</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kr>constructor</span><span class=p>(</span><span class=kr>private</span> <span class=nx>_service</span>: <span class=kt>TaskService</span><span class=p>)</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>ngOnInit</span><span class=p>()</span><span class=o>:</span> <span class=k>void</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>onUpdateOrderIndex</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>onUpdateOrderIndex() {</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>_service</span><span class=p>.</span><span class=nx>updateOrderIndex$</span><span class=p>.</span><span class=nx>pipe</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=nx>debounceTime</span><span class=p>(</span><span class=mi>2000</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=nx>map</span><span class=p>((</span><span class=nx>tasks</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>updatedTasks</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Array</span><span class=p>&lt;</span><span class=nt>Task</span><span class=p>&gt;();</span>
</span></span><span class=line><span class=cl>            <span class=nx>tasks</span><span class=p>.</span><span class=nx>forEach</span><span class=p>((</span><span class=nx>task</span><span class=p>,</span> <span class=nx>i</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span><span class=p>(</span><span class=nx>task</span><span class=p>.</span><span class=nx>orderIndex</span> <span class=o>!=</span> <span class=nx>i</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>task</span><span class=p>.</span><span class=nx>orderIndex</span> <span class=o>=</span> <span class=nx>i</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=nx>updatedTasks</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=nx>task</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>});</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=nx>updatedTasks</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}),</span>
</span></span><span class=line><span class=cl>        <span class=nx>filter</span><span class=p>((</span><span class=nx>updatedTasks</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=nx>updatedTasks</span><span class=p>.</span><span class=nx>length</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=nx>switchMap</span><span class=p>((</span><span class=nx>tasks</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=k>this</span><span class=p>.</span><span class=nx>_service</span><span class=p>.</span><span class=nx>updateOrderIndex</span><span class=p>(</span><span class=nx>tasks</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=p>).</span><span class=nx>subscribe</span><span class=p>(()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>_coService</span><span class=p>.</span><span class=nx>orderIndexUpdated</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>loginInfo</span><span class=p>.</span><span class=nx>username</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=2-service-to-handle-update-requests>2. Service to Handle Update Requests</h3><p>Handle the HTTP request in the service to update the task order in the backend.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>export</span> <span class=kr>class</span> <span class=nx>TaskService</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>updateOrderIndex$</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Subject</span><span class=p>&lt;</span><span class=nt>Task</span><span class=err>[]</span><span class=p>&gt;();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kr>constructor</span><span class=p>(</span><span class=kr>private</span> <span class=nx>_http</span>: <span class=kt>HttpClient</span><span class=p>,</span> <span class=kr>private</span> <span class=nx>_env</span>: <span class=kt>EnvService</span><span class=p>)</span> <span class=p>{</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>updateOrderIndex</span><span class=p>(</span><span class=nx>tasks</span>: <span class=kt>Task</span><span class=p>[])</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>_http</span><span class=p>.</span><span class=nx>patch</span><span class=p>(</span><span class=sb>`</span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>_env</span><span class=p>.</span><span class=nx>APIOption</span><span class=p>.</span><span class=nx>TaskEndpoint</span><span class=si>}</span><span class=sb>/OrderIndex`</span><span class=p>,</span> <span class=nx>tasks</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=conclusion>Conclusion</h2><p>With SignalR, updates are broadcast instantly to all connected users, ensuring that everyone is on the same page. By incorporating debouncing for handling rapid changes, you reduce server load and improve performance. This combination of real-time communication and efficient backend handling makes the task list update process seamless and user-friendly.</p><div class=page-tag><ul class=tag-list><li class=tag-item><a href=/categories/web-development/ class=tag-item-link>Web Development</a></li><li class=tag-item><a href=/tags/.net/ class=tag-item-link>.NET</a></li><li class=tag-item><a href=/tags/angular/ class=tag-item-link>Angular</a></li></ul></div></div></article></main></div><footer class=footer><span class=footer_item></span>&nbsp;<div class=footer_social-icons><a href=https://github.com/InkyChew target=_blank rel="noopener noreferrer me" title=Github><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a><a href=/index.xml target=_blank rel="noopener noreferrer me" title=Rss><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></div><small class=footer_copyright>© 2024 InkyChew.</small></footer><a href=# title="Go to top" id=totop><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentcolor" stroke="currentcolor" viewBox="0 96 960 960"><path d="M283 704.739 234.261 656 480 410.261 725.739 656 677 704.739l-197-197-197 197z"/></svg></a><script src=https://inkychew.github.io/js/main.min.35f435a5d8eac613c52daa28d8af544a4512337d3e95236e4a4978417b8dcb2f.js integrity="sha256-NfQ1pdjqxhPFLaoo2K9USkUSM30+lSNuSkl4QXuNyy8="></script></body></html>